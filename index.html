<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>مصاريفي | My Expenses</title>
<link rel="manifest" href="./manifest.webmanifest">
<meta name="theme-color" content="#0ea5e9">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="./assets/icons/icon-192.png">
<link rel="icon" type="image/png" href="./assets/icons/icon-192.png">
<style>body{font-family:system-ui,sans-serif;padding:24px} .ok{color:#16a34a}</style>
</head>
<body>
<h1>Masarefy PWA — Install Test</h1>
<p class="ok">هذه النسخة مخصّصة لتأكيد التثبيت كـ <b>standalone</b>. انسخ هذه الملفات مكان الملفات في مشروعك (manifest/index/service-worker + icons).</p>
<button id="installBtn">📲 ثبّت التطبيق</button>
<div id="msg"></div>
<script>
let dp=null;
const btn=document.getElementById('installBtn');
window.addEventListener('beforeinstallprompt',(e)=>{e.preventDefault(); dp=e; btn.style.display='inline-block';});
btn.onclick=async()=>{ if(dp){ dp.prompt(); await dp.userChoice; dp=null; } else { document.getElementById('msg').textContent='افتح من Chrome/Edge على HTTPS ثم جرّب مجددًا.'; } };
if('serviceWorker' in navigator){ window.addEventListener('load', ()=> navigator.serviceWorker.register('./service-worker.js')); }
</script>
</body></html>
